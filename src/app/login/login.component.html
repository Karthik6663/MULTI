<form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="login-form" *ngIf="!otpRequired">
  <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>
  <div class="form-group">
    <label for="username">Username</label>
    <input id="username" formControlName="username" class="form-control" />
    <div *ngIf="loginForm.get('username')?.invalid && loginForm.get('username')?.touched" class="error-message">
      <small *ngIf="loginForm.get('username')?.errors?.['required']">Username is required.</small>
    </div>
  </div>
  <div class="form-group">
    <label for="password">Password</label>
    <input id="password" type="password" formControlName="password" class="form-control" />
    <div *ngIf="loginForm.get('password')?.invalid && loginForm.get('password')?.touched" class="error-message">
      <small *ngIf="loginForm.get('password')?.errors?.['required']">Password is required.</small>
    </div>
  </div>
  <div class="button-group">
    <button type="submit" class="btn btn-primary">Login</button>
    <button type="button" class="btn btn-secondary" (click)="navigateToRegister()">Register</button>
  </div>
</form>

<form [formGroup]="otpForm" (ngSubmit)="onOtpSubmit()" class="otp-form" *ngIf="otpRequired">
  <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>
  <div class="form-group">
    <label for="otp">OTP</label>
    <input id="otp" formControlName="otp" class="form-control" />
    <div *ngIf="otpForm.get('otp')?.invalid && otpForm.get('otp')?.touched" class="error-message">
      <small *ngIf="otpForm.get('otp')?.errors?.['required']">OTP is required.</small>
    </div>
  </div>
  <div class="button-group">
    <button type="submit" class="btn btn-primary">Verify OTP</button>
  </div>
</form>

<!-- Display last login time and last IP address -->
<div *ngIf="lastLoginTime && lastLoginIP">
  <p>Last Login Time: {{ lastLoginTime }}</p>
  <p>Last Login IP: {{ lastLoginIP }}</p>
</div>
